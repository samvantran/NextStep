<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="A layout example that shows off a responsive product landing page.">

  <title>NextStep</title> 

  <link rel="stylesheet" href="http://yui.yahooapis.com/pure//pure.css">
  <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">

  <!--[if lte IE 8]>
    
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure//grids-responsive-old-ie.css">
    
  <![endif]-->
  <!--[if gt IE 8]><!-->
    
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure//grids-responsive.css">
    
  <!--<![endif]-->


  <style>
    * {
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
        box-sizing: border-box;
    }

    /*
     * -- BASE STYLES --
     * Most of these are inherited from Base, but I want to change a few.
     */
    body {
        line-height: 1.7em;
        color: #7f8c8d;
        font-size: 13px;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    label {
        color: #34495e;
    }

    .pure-img-responsive {
        max-width: 100%;
        height: auto;
    }

    /*
     * -- LAYOUT STYLES --
     * These are some useful classes which I will need
     */
    .l-box {
        padding: 1em;
    }

    .l-box-lrg {
        padding: 6em;
        border-bottom: 1px solid rgba(0,0,0,0.1);
    }

    .is-center {
        text-align: center;
    }



    /*
     * -- PURE FORM STYLES --
     * Style the form inputs and labels
     */
    .pure-form label {
        margin: 1em 0 0;
        font-weight: bold;
        font-size: 100%;
    }

    .pure-form input[type] {
        border: 2px solid #ddd;
        box-shadow: none;
        font-size: 100%;
        width: 100%;
        margin-bottom: 1em;
    }

    /*
     * -- PURE BUTTON STYLES --
     * I want my pure-button elements to look a little different
     */
    .pure-button {
        background-color: #1f8dd6;
        color: white;
        padding: 0.5em 2em;
        border-radius: 5px;
    }

    a.pure-button-primary {
        background: white;
        color: #1f8dd6;
        border-radius: 5px;
        font-size: 120%;
    }


    /*
     * -- MENU STYLES --
     * I want to customize how my .pure-menu looks at the top of the page
     */

    .home-menu {
        padding: 0.5em;
        text-align: center;
        box-shadow: 0 1px 1px rgba(0,0,0, 0.10);
    }
    .home-menu.pure-menu-open {
        background: #2d3e50;
    }
    .pure-menu.pure-menu-open.pure-menu-fixed {
        /* Fixed menus normally have a border at the bottom. */
        border-bottom: none;
        /* I need a higher z-index here because of the scroll-over effect. */
        z-index: 4;
    }

    .home-menu .pure-menu-heading {
        color: white;
        font-weight: 400;
        font-size: 120%;
    }

    .home-menu .pure-menu-selected a {
        color: white;
    }

    .home-menu a {
        color: #6FBEF3;
    }
    .home-menu li a:hover,
    .home-menu li a:focus {
        background: none;
        border: none;
        color: #AECFE5;
    }

    /*
     * -- SPLASH STYLES --
     * This is the blue top section that appears on the page.
     */

    .splash-container {
        background: #1f8dd6;
        z-index: 1;
        overflow: hidden;
        /* The following styles are required for the "scroll-over" effect */
        width: 100%;
        height: 88%;
        top: 0;
        left: 0;
        position: fixed !important;
    }

    .splash {
        /* absolute center .splash within .splash-container */
        width: 80%;
        height: 50%;
        margin: auto;
        position: absolute;
        top: 100px; left: 0; bottom: 0; right: 0;
        text-align: center;
        text-transform: uppercase;
    }

    /* This is the main heading that appears on the blue section */
    .splash-head {
        font-size: 0px;
        font-weight: bold;
        color: white;
        border: 3px solid white;
        padding: 1em 1.6em;
        font-weight: 100;
        border-radius: 5px;
        line-height: 1em;
        text-decoration: none;
    }

    .splash p a {
        text-decoration: none;
        font-size: 14px;
    }

    /* This is the subheading that appears on the blue section */
    .splash-subhead {
        color: white;
        letter-spacing: 0.05em;
        opacity: 0.8;
        font-size: 20px;
        /*text-decoration: none;*/
    }

    /*
     * -- CONTENT STYLES --
     * This represents the content area (everything below the blue section)
     */
    .content-wrapper {
        /* These styles are required for the "scroll-over" effect */
        position: absolute;
        left: -1px;
        top: 87%;
        width: 100%;
        min-height: 12%;
        z-index: 2;
        background: white;

    }

    /* This is the class used for the main content headers (<h2>) */
    .content-head {
        font-weight: 400;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        margin: 1em 0 1em;
        text-decoration: none;
        text-align: center;
    }

    .content-head p {
        font-weight: 200;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        margin: 1em 0 1em;
        text-decoration: none;
        text-align: center;
    }

    .content-head a {
        color: #1f8dd6;
        text-decoration: none;
    }

    .content-head a:hover {
        color: white
    }


    /* This is a modifier class used when the content-head is inside a ribbon */
    .content-head-ribbon {
        color: white;
        font-size: 30px;
    }

    /* This is the class used for the content sub-headers (<h3>) */
    .content-subhead {
        color: #1f8dd6;
    }
        .content-subhead i {
            margin-right: 7px;
        }

    /* This is the class used for the dark-background areas. */
    .ribbon {
        background: #2d3e50;
        color: #aaa;
    }

    /* This is the class used for the footer */
    .footer {
        background: #1f8dd6;
    }

    .footer h5 {
        color: #FFFFFF;
        font-weight: 100;
        text-transform: uppercase;
        margin: 1em 0 1em;
        text-decoration: none;
        text-align: center;
        letter-spacing: 0.1em
    }

    table {
        margin: 0px 0px 0px 20px;
    }

    th {
        text-align: center;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        color: #1f8dd6;
        font-weight: 100;
    }

    td {
        text-align: center;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        color: #1f8dd6;
        font-weight: 100;
    }

    /*
     * -- TABLET (AND UP) MEDIA QUERIES --
     * On tablets and other medium-sized devices, we want to customize some
     * of the mobile styles.
     */
    @media (min-width: 48em) {

        /* We increase the body font size */
        body {
            font-size: 16px;
        }
        /* We want to give the content area some more padding */
        .content {
            padding: 1em;
        }

        /* We can align the menu header to the left, but float the
        menu items to the right. */
        .home-menu {
            text-align: left;
        }
            .home-menu ul {
                float: right;
            }

        /* We increase the height of the splash-container */
    /*    .splash-container {
            height: 500px;
        }*/

        /* We decrease the width of the .splash, since we have more width
        to work with */
        .splash {
            width: 50%;
            height: 50%;
        }

        .splash-head {
            font-size: 500%;
        }


        /* We remove the border-separator assigned to .l-box-lrg */
        .l-box-lrg {
            border: none;
        }

    }

    /*
     * -- DESKTOP (AND UP) MEDIA QUERIES --
     * On desktops and other large devices, we want to over-ride some
     * of the mobile and tablet styles.
     */
    @media (min-width: 78em) {
        /* We increase the header font size even more */
        .splash-head {
            font-size: 300%;
        }
    }
  </style>
</head>
<body>

  <div class="splash-container">
    <div class="splash">
      <h1 class="splash-head">NextStep</h1>
      <p class="splash-subhead">
          Following the <%= @s.company_name %> journey, one step at a time
      </p>
      <p>
          <a href="http://www.flatironschool.com" class="pure-button pure-button-primary">Made with   &#9829;   at The Flatiron School</a>
      </p>
    </div>
  </div>

  <div class="content-wrapper">
      <div class="pure-g">
        <div class="l-box-lrg pure-u-1 pure-u-md-2-5">
        <h1 class="content-head is-center">Where do <%= @s.company_name %> alumni end up?</h1>
        <script type="text/javascript"></script>
        <style>
            html, body, #map-canvas {
              height: 90%;
              margin: 0px 25px 13px 5px;
              padding: 10px;
            }
        </style>
        <script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>
        
        <script>

        // company locations declared below:
        var citymap = {};

        <% @s.sorted_companies.each do |company| %>
          <% if !company[2].nil? %>
          citymap["<%= company[0] %>"] = {
            center: new google.maps.LatLng(<%= company[2] %>, <%= company[3] %>),
            population: <%= company[1] %>
          };
          <% end %>
        <% end %>

        var cityCircle;

        // Initialize method:
        function initialize() {

          var mapOptions = {
            zoom: 13,
            center: new google.maps.LatLng(<%= @s.sorted_companies.first[2] %>, <%= @s.sorted_companies.first[3] %>),
            mapTypeId: google.maps.MapTypeId.TERRAIN,
            mapTypeControl: false,
            streetViewControl: false,
            panControl: false,
            zoomControlOptions: {
              positions: google.maps.ControlPosition.LEFT_BOTTOM
            }
          };

          var map = new google.maps.Map(document.getElementById('location-canvas'), 
              mapOptions);

          for (var city in citymap) {
            var populationOptions = {
              strokeColor: '#1f8dd6',
              strokeOpacity: 0.8,
              strokeWeight: 2,
              fillColor: '#8FC6EA',
              fillOpacity: 0.35,
              map: map,
              center: citymap[city].center,
              radius: Math.sqrt(citymap[city].population) * 600
            };

            cityCircle = new google.maps.Circle(populationOptions);
          }
        }

            google.maps.event.addDomListener(window, 'resize', initialize);
            google.maps.event.addDomListener(window, 'load', initialize)

        </script>
        
        <div id='location-canvas' style='width:80%;height:450px;margin:auto;'></div>

        <div class="pure-g">
            <div id="chart_div" style="width: 200px; height: 50px;"></div>
        </div>
    </div>

    <div class="ribbon l-box-lrg pure-g">
        <h2 class="content-head content-head-ribbon">What Industries Do <%= @s.company_name %> alumni Work In?</h2>
        <!-- <div class="l-box-lrg is-center pure-u-1 pure-u-md-1-2 pure-u-lg-2-5">
 -->            <!-- <div class="pure-u-1 pure-u-md-1-2 pure-u-lg-3-5"> -->
               <script type="text/javascript" src="https://www.google.com/jsapi"></script>
               <script type="text/javascript">
                 google.load("visualization", "1", {packages:["corechart"]});
                 google.setOnLoadCallback(drawChart);
                  function drawChart() {

                    var data = google.visualization.arrayToDataTable([
                      ['Industry', 'Number of Alumni'],
                      <% @s.sorted_industries.each do |industry| %>
                      <%= industry %>,
                      <% end %>
                    ]);

                    var options = {
                      is3D: true,
                      slices: {  0: {offset: 0.2},
                                          1: {offset: 0.2},
                                          2: {offset: 0.2}
                                },
                      legend: {position: 'left', textStyle: {color: 'black', fontSize: 15}}
                    };

                    var chart = new google.visualization.PieChart(document.getElementById('piechart_3d'));
                            chart.draw(data, options);
                  }

                </script>
            <div id="piechart_3d" style="width: 900px; height: 500px;margin:auto"></div>
        <!-- </div> -->
      </div>
        <div class="content">
        <div class="pure-g">
          <div class="l-box-lrg pure-u-1 pure-u-md-2-5">
<!--             <div class="content"> -->
          <h1 class="content-head is-center">What <%= @s.company_name %> Alumni Currently Do:</h1>
          <script type="text/javascript" src="https://www.google.com/jsapi"></script>
              <script type="text/javascript">
                google.load("visualization", "1", {packages:["bar"]});
                google.setOnLoadCallback(drawChart);
                function drawChart() {
                  var data = google.visualization.arrayToDataTable([
                    ['Job Title', 'Number of Alumni', { role: 'style' }],
                    <% @s.sorted_titles[0..9].each do |title| %>
                      <%= [title[0], title[1], 'color: #1f8dd6'] %>,
                    <% end %>
                    ]);

                  var options = {
                           hAxis: {title: 'Job Title Frequency',  titleTextStyle: {color: '#1f8dd6'}},
                           legend: { position: "none" },
                           bar: {groupWidth: "95%"}
                         };

                  var chart = new google.visualization.BarChart(document.getElementById('bar_chart'));

                  chart.draw(data, options);
                }
              </script>
              <div id="bar_chart" style="width:80%;height:450px;margin:auto"></div>
              
              <div class="content">
              <h1 class="content-head is-center">Where <%= @s.company_name %> Alumni Currently Work:</h1>
              <div id="contentBox" style="margin:0px auto; width:100%">
                <div class="container">
                  <div class="table">
                  <table style="width:100%">
                    <% count = 0 %>
                    <% while count < 8 && @s.sorted_companies.size > 0 %>
                      <% company_group = @s.sorted_companies.shift(3) %>
                      <tr>
                        <% company_group.each do |company| %>
                        <td><%= company[0] %></td>
                        <% end %>
                        <% count += 1 %>
                      </tr>
                    <% end %>
                  </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
            <div class="ribbon l-box-lrg pure-g">
                <h3 class="content-head content-head-ribbon">Want to get involved with The Flatiron School?</h3>
                <p class="content-head is-center">Become a <a href="http://flatironschool.com/hire.html">hiring partner</a> or <a href="http://go.flatironschool.com/apply">apply</a> to The Flatiron School today!</p>
            </div>
          </br>
            <div class="ribbon l-box pure-g" style="background-color: #747c81;">
              <h3 class="content-head content-head-ribbon">Want to search a different company?</h3>
              <p class="content-head is-center" style="color: white;">Just type in a new company name below and click submit</p>
              <form action="/rerun-magic" method="post" style="text-align: center;">
              <input type="text" name="company_name" style="border: 2px solid #ddd;
        box-shadow: none; font-size: 100%; height:42px; width: 25%; margin: 1em;" >
              <button type="submit" class="pure-button pure-button-primary" style="background-color: #1f8dd6;
        color: white; padding: 0.5em 2em; border-radius: 5px; background: white; color: #1f8dd6; font-size: 120%; text-decoration:none;">Re-Run the Magic!</button>
            </div>
            </form>
        </div>
      </div>
    </div>

    <div class="footer l-box is-center">
        <h5>NextStep was created with   &#9829;   by Sam Van Tran & Vaidehi Joshi, Ruby-006.</h5>
    </div>

  </div>


</body>
</html>

